<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Table Tennis – Player vs Computer</title>
    <style>
        body {
            margin: 0;
            background: #111;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
            font-family: Arial, sans-serif;
        }

        canvas {
            background: #000;
            border: 3px solid #fff;
        }

        .info {
            position: absolute;
            top: 10px;
            text-align: center;
            width: 100%;
            font-size: 14px;
            opacity: 0.8;
        }
    </style>
</head>
<body>

<div class="info">
    Use ↑ and ↓ arrow keys to move your paddle
</div>

<canvas id="gameCanvas" width="800" height="400"></canvas>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    const paddleWidth = 10;
    const paddleHeight = 80;

    // Player paddle (RED)
    const player = {
        x: 20,
        y: canvas.height / 2 - paddleHeight / 2,
        speed: 6,
        score: 0,
        color: "red"
    };

    // Computer paddle (GREEN)
    const computer = {
        x: canvas.width - 30,
        y: canvas.height / 2 - paddleHeight / 2,
        speed: 4,
        score: 0,
        color: "green"
    };

    // Ball (WHITE)
    const ball = {
        x: canvas.width / 2,
        y: canvas.height / 2,
        radius: 7,
        speedX: 5,
        speedY: 3,
        color: "white"
    };

    let upPressed = false;
    let downPressed = false;

    document.addEventListener("keydown", e => {
        if (e.key === "ArrowUp") upPressed = true;
        if (e.key === "ArrowDown") downPressed = true;
    });

    document.addEventListener("keyup", e => {
        if (e.key === "ArrowUp") upPressed = false;
        if (e.key === "ArrowDown") downPressed = false;
    });

    function resetBall() {
        ball.x = canvas.width / 2;
        ball.y = canvas.height / 2;
        ball.speedX = -ball.speedX;
        ball.speedY = Math.random() * 4 - 2;
    }

    function drawRect(x, y, w, h, color) {
        ctx.fillStyle = color;
        ctx.fillRect(x, y, w, h);
    }

    function drawBall(x, y, r, color) {
        ctx.fillStyle = color;
        ctx.beginPath();
        ctx.arc(x, y, r, 0, Math.PI * 2);
        ctx.fill();
    }

    // Center bar / net (YELLOW)
    function drawNet() {
        for (let i = 0; i < canvas.height; i += 15) {
            drawRect(canvas.width / 2 - 1, i, 2, 10, "yellow");
        }
    }

    function drawScore() {
        ctx.fillStyle = "white";
        ctx.font = "20px Arial";
        ctx.fillText(player.score, canvas.width / 4, 30);
        ctx.fillText(computer.score, 3 * canvas.width / 4, 30);
    }

    function update() {
        if (upPressed && player.y > 0) {
            player.y -= player.speed;
        }
        if (downPressed && player.y < canvas.height - paddleHeight) {
            player.y += player.speed;
        }

        // Computer AI
        const targetY = ball.y - paddleHeight / 2;
        if (computer.y < targetY) {
            computer.y += computer.speed;
        } else if (computer.y > targetY) {
            computer.y -= computer.speed;
        }

        ball.x += ball.speedX;
        ball.y += ball.speedY;

        if (ball.y < ball.radius || ball.y > canvas.height - ball.radius) {
            ball.speedY = -ball.speedY;
        }

        // Player collision
        if (
            ball.x - ball.radius < player.x + paddleWidth &&
            ball.y > player.y &&
            ball.y < player.y + paddleHeight
        ) {
            ball.speedX = -ball.speedX;
        }

        // Computer collision
        if (
            ball.x + ball.radius > computer.x &&
            ball.y > computer.y &&
            ball.y < computer.y + paddleHeight
        ) {
            ball.speedX = -ball.speedX;
        }

        if (ball.x < 0) {
            computer.score++;
            resetBall();
        }

        if (ball.x > canvas.width) {
            player.score++;
            resetBall();
        }
    }

    function render() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        drawNet();
        drawScore();
        drawRect(player.x, player.y, paddleWidth, paddleHeight, player.color);
        drawRect(computer.x, computer.y, paddleWidth, paddleHeight, computer.color);
        drawBall(ball.x, ball.y, ball.radius, ball.color);
    }

    function gameLoop() {
        update();
        render();
        requestAnimationFrame(gameLoop);
    }

    gameLoop();
</script>

</body>
</html>
